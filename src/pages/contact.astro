---
import BaseLayout from "../layouts/BaseLayout.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";

const breadcrumbItems = [{ label: "Accueil", href: "/" }, { label: "Contact" }];
---

<BaseLayout
    title="Contact | AnouarLab"
    description="Contactez AnouarLab pour un audit SEO, une optimisation CRO, ou toute question sur l'amélioration de votre boutique Shopify ou WordPress."
    sideBarActiveItemID="contact"
>
    <div class="pb-12 mt-5">
        <!-- Breadcrumbs -->
        <Breadcrumbs items={breadcrumbItems} />

        <!-- Hero Section -->
        <div class="text-center mb-12">
            <p
                class="text-sm font-medium tracking-widest uppercase text-primary/70 mb-2"
            >
                Parlons de votre projet
            </p>
            <h1 class="text-4xl font-bold mb-4">
                Prêt à débloquer votre croissance ?
            </h1>
            <p class="text-xl text-base-content/70 max-w-2xl mx-auto">
                Décrivez-moi votre besoin ci-dessous. Je vous réponds sous 24h
                pour discuter de vos objectifs.
            </p>
        </div>

        <!-- Netlify Form -->
        <div class="max-w-2xl mx-auto">
            <form
                name="contact"
                method="POST"
                action="/merci"
                data-netlify="true"
                netlify-honeypot="bot-field"
                class="card bg-base-200 shadow-xl"
            >
                <div class="card-body">
                    <!-- Honeypot field (spam protection) -->
                    <p class="hidden">
                        <label>
                            Ne remplissez pas ce champ si vous êtes humain:
                            <input name="bot-field" />
                        </label>
                    </p>
                    <input type="hidden" name="form-name" value="contact" />

                    <!-- Name -->
                    <div class="form-control w-full">
                        <label class="label" for="name">
                            <span class="label-text font-medium">Votre nom</span
                            >
                        </label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            placeholder="Jean Dupont"
                            class="input input-bordered w-full"
                            required
                        />
                    </div>

                    <!-- Email -->
                    <div class="form-control w-full mt-4">
                        <label class="label" for="email">
                            <span class="label-text font-medium"
                                >Votre email</span
                            >
                        </label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            placeholder="jean@entreprise.com"
                            class="input input-bordered w-full"
                            required
                        />
                    </div>

                    <!-- Website URL -->
                    <div class="form-control w-full mt-4">
                        <label class="label" for="website">
                            <span class="label-text font-medium"
                                >URL de votre site (optionnel)</span
                            >
                        </label>
                        <input
                            type="url"
                            id="website"
                            name="website"
                            placeholder="https://www.votre-boutique.com"
                            class="input input-bordered w-full"
                        />
                    </div>

                    <!-- Subject -->
                    <div class="form-control w-full mt-4">
                        <label class="label" for="subject">
                            <span class="label-text font-medium">Sujet</span>
                        </label>
                        <select
                            id="subject"
                            name="subject"
                            class="select select-bordered w-full"
                            required
                        >
                            <option disabled selected
                                >Choisissez un sujet</option
                            >
                            <option value="Audit SEO">Audit SEO</option>
                            <option value="Optimisation CRO"
                                >Optimisation CRO / Conversion</option
                            >
                            <option value="Shopify"
                                >Shopify (Performance, Tracking)</option
                            >
                            <option value="WordPress"
                                >WordPress (Performance, SEO)</option
                            >
                            <option value="Autre">Autre demande</option>
                        </select>
                    </div>

                    <!-- Message -->
                    <div class="form-control w-full mt-4">
                        <label class="label" for="message">
                            <span
                                class="label-text font-medium text-base-content"
                                >Votre message</span
                            >
                        </label>
                        <textarea
                            id="message"
                            name="message"
                            placeholder="Décrivez votre projet ou votre besoin..."
                            class="textarea textarea-bordered w-full py-3 px-4 leading-relaxed rounded-lg"
                            rows="6"
                            required></textarea>
                    </div>

                    <!-- Submit -->
                    <div class="form-control mt-6">
                        <button type="submit" class="btn btn-primary w-full">
                            Envoyer ma demande
                        </button>
                    </div>

                    <p class="text-xs text-center text-base-content/50 mt-4">
                        Réponse garantie sous 24h ouvrées. Vos données restent
                        confidentielles.
                    </p>
                </div>
            </form>
        </div>
    </div>
    <script>
        document.addEventListener("astro:page-load", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const subjectParam = urlParams.get("subject");

            const subjectSelect = document.getElementById(
                "subject",
            ) as HTMLSelectElement | null;
            const messageArea = document.getElementById(
                "message",
            ) as HTMLTextAreaElement | null;

            if (subjectParam && subjectSelect && messageArea) {
                if (subjectParam === "audit-flash") {
                    subjectSelect.value = "Audit SEO";
                    messageArea.value =
                        "Bonjour,\n\nJe souhaite commander un Audit Flash (497€) pour mon site.\n\nMerci.";
                } else if (subjectParam === "audit-strategique") {
                    subjectSelect.value = "Audit SEO";
                    messageArea.value =
                        "Bonjour,\n\nJe suis intéressé par un Audit Stratégique complet (2 500€).\n\nPouvons-nous planifier un appel ?";
                }
            }
        });
    </script>
</BaseLayout>
